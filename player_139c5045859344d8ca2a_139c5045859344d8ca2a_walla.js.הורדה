(()=>{var e,t,i,a={177:(e,t,i)=>{var a={"./AbstractEventPlugin":[69650,9650],"./AbstractEventPlugin.ts":[69650,9650],"./AnalyticsEventPlugin":[34342,4342],"./AnalyticsEventPlugin.ts":[34342,4342]};function n(e){if(!i.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return i.e(t[1]).then((()=>i(n)))}n.keys=()=>Object.keys(a),n.id=177,e.exports=n},57106:(e,t,i)=>{"use strict";var a=i(7209),n=i(53755),r=i(47061),o=i(59900),s=i(20240),l=i(88047),d=i.n(l),u=i(8358),c=(i(85054),i(34176),i(40240),i(55970),i(68434),function(e){return e.Original="",e["1_1"]="t_53",e["4_3"]="t_18",e["3_4"]="t_41",e["16_9"]="t_54",e["12_15"]="t_14",e["9_16"]="t_100",e}({})),v=i(57830),p=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});function m(e){return i=function(){return{element:document.createElement("video"),source:URL.createObjectURL(p)}},a=(t=e=function(e){return Object.assign({muted:!1,timeout:750,inline:!1},e||{})}(e)).muted,n=t.timeout,r=t.inline,o=i(),s=o.element,l=o.source,d=void 0,u=void 0,s.muted=a,!0===a&&s.setAttribute("muted","muted"),!0===r&&s.setAttribute("playsinline","playsinline"),s.src=l,new Promise((function(e,t){d=s.play(),u=setTimeout((function(){t(new Error("Timeout "+n+" ms has been reached"))}),n),void 0!==d?d.then((function(){clearTimeout(u),e(!0)})).catch((function(e){clearTimeout(u),t(e)})):(clearTimeout(u),e(!0))}));var t,i,a,n,r,o,s,l,d,u}var y=i(311),h=i(15819),f=function(e){if(!(null==e||""===e||isNaN(e)&&"true"!==e))return!0===e||1===e||e===e+""&&("true"===(e=e.toLowerCase())||"1"===e)};function g(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return P(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?P(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){(0,s.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var w=function(e){return e.Aspect_16_9="16:9",e.Aspect_4_3="4:3",e.Aspect_Fluid="fluid",e}(w||{}),A="player_volume",_=(0,v.j)("EMBED_PLAYER"),k=function(){function e(){var t=this;(0,r.Z)(this,e),(0,s.Z)(this,"sdkContext",void 0),(0,s.Z)(this,"queryParams",void 0),(0,s.Z)(this,"eventPluginsConfig",[]),(0,s.Z)(this,"eventPlugins",[]),(0,s.Z)(this,"eventProperties",{}),(0,s.Z)(this,"player",void 0),(0,s.Z)(this,"isPlayAutoplay",!1),(0,s.Z)(this,"isFirstProgressReported",!1),(0,s.Z)(this,"mediaId",void 0),(0,s.Z)(this,"autoplay",!1),(0,s.Z)(this,"aspect",w.Aspect_16_9),(0,s.Z)(this,"aspectClass","vjs-16-9"),(0,s.Z)(this,"aspectOptions",void 0),(0,s.Z)(this,"disableAds",!1),(0,s.Z)(this,"disableFullScreen",!1),(0,s.Z)(this,"disableControls",!1),(0,s.Z)(this,"muted",!1),(0,s.Z)(this,"loop",!1),(0,s.Z)(this,"imaSizes","635x360|640x480|640x480|640x360|635x360"),(0,s.Z)(this,"imaKeyValues",void 0),(0,s.Z)(this,"imaAdUnit",void 0),(0,s.Z)(this,"url",void 0),(0,s.Z)(this,"imaTag",void 0),(0,s.Z)(this,"output",void 0),(0,s.Z)(this,"vpi",void 0),(0,s.Z)(this,"stream",void 0),(0,s.Z)(this,"poster",void 0),(0,s.Z)(this,"backgroundPlayer",!1),(0,s.Z)(this,"parentWindow",void 0),(0,s.Z)(this,"playerElem",void 0),(0,s.Z)(this,"videoJsPlayer",void 0),(0,s.Z)(this,"media",void 0),(0,s.Z)(this,"playbackEnded",!1),(0,s.Z)(this,"setupAspectRatioParams",(function(){switch(t.aspectOptions={fluid:!1,aspectRatio:t.aspect},t.aspect){case w.Aspect_16_9:t.aspectClass="vjs-16-9",t.aspectOptions={fluid:!1,aspectRatio:w.Aspect_16_9};break;case w.Aspect_4_3:t.aspectClass="vjs-4-3",t.aspectOptions={fluid:!1,aspectRatio:w.Aspect_4_3};break;case w.Aspect_Fluid:t.aspectClass="vjs-fluid",t.aspectOptions={fluid:!0,fill:!0}}})),(0,s.Z)(this,"setupPlayerDimentions",(function(e){_.debug("setupPlayerDimentions",document.body.clientHeight/document.body.clientWidth<9/16),document.body.clientHeight/document.body.clientWidth<9/16?e.style.width=16*document.body.clientHeight/9+"px":e.style.width="100%"})),this.setupParent(),(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setupQueryParams(),e.next=3,t.initConfig();case 3:return e.next=5,t.initPlugins();case 5:return t.setupAspectRatioParams(),t.setupPlayerElement(),t.setupVideoJsPlayer(),e.next=10,t.initMedia();case 10:return e.next=12,t.initEventProperties();case 12:return t.setupPoster(),e.next=15,t.waitForGoogleImaIfAdsEnabled();case 15:return t.setupSubtitles(),t.setupPlayerSrc(),t.setupPlayerEvents(),t.setupImaTagIfAdsEnabled(),t.setupImaIfAdsEnabled(),e.next=22,t.setupGeoBlockingIfNecessary();case 22:t.setupParentalControlIfNecessary(),t.setupVolume(),t.attemptAutoplay();case 25:case"end":return e.stop()}}),e)})))()}var t,l,v,p,P,b;return(0,o.Z)(e,[{key:"setupParent",value:function(){var e=this;window.addEventListener("message",(function(t){var i;void 0===e.parentWindow&&(null==t||null===(i=t.data)||void 0===i?void 0:i.type)===y.z.Init&&(e.sdkContext=null==t?void 0:t.data.sdkContext,_.debug(y.z.Init,null==t?void 0:t.data),e.parentWindow=t.source)}))}},{key:"setupQueryParams",value:function(){var e=new URLSearchParams(window.location.search),t={player:e.get("player")||void 0,mediaId:e.get("media")||void 0,autoplay:f(e.get("autoplay")),aspect:e.get("aspect")||void 0,disableAds:f(e.get("disableAds")),disableFullScreen:f(e.get("disableFullScreen")),muted:f(e.get("mute")||e.get("muted")),backgroundPlayer:f(e.get("backgroundPlayer")),loop:f(e.get("loop")),imaSizes:e.get("imaSizes")||void 0,imaAdUnit:e.get("imaAdUnit")||void 0,url:e.get("url")||void 0,stream:e.get("stream")||void 0,poster:e.get("poster")||void 0,redirectUrl:e.get("redirectUrl")||void 0};try{t.imaKeyValues=e.get("imaKeyValues")?JSON.parse(e.get("imaKeyValues")):void 0}catch(e){_.warn("failed to parse imaKeyValues",e),t.imaKeyValues=void 0}this.queryParams=Object.keys(t).reduce((function(e,i){return void 0!==t[i]&&(e[i]=t[i]),e}),{}),_.debug("extracted from query params",this.queryParams)}},{key:"setupPlayerElement",value:function(){var e;this.playerElem=document.querySelector("#playerElem"),this.setupPlayerDimentions(this.playerElem.parentElement),window.addEventListener("resize",function(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),n=2;n<i;n++)a[n-2]=arguments[n];var r;return function(){void 0!==r&&(clearTimeout(r),r=void 0),r=setTimeout((function(){return e.apply(void 0,a)}),t)}}(this.setupPlayerDimentions,150,this.playerElem.parentElement)),this.playerElem.classList.add(this.aspectClass),this.playerElem.setAttribute("playsinline","playsinline"),location.host.indexOf("euro.walla.co.il")>=0&&("https://injector.inthegame.io/walla_injector.js",(e=document.createElement("script")).setAttribute("src","https://injector.inthegame.io/walla_injector.js"),new Promise((function(t,i){e.onload=function(){t()},e.onerror=function(e){i(e)},document.body.appendChild(e)})))}},{key:"setupVideoJsPlayer",value:function(){this.videoJsPlayer=(0,u.Z)("playerElem",E(E({},this.aspectOptions),{},{controls:!this.disableControls,controlBar:{fullscreenToggle:!this.disableFullScreen},preload:"auto",muted:this.muted,loop:this.loop})),window.wallaPlayer=this.videoJsPlayer}},{key:"initConfig",value:(b=(0,n.Z)(d().mark((function e(){var t,i,a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/public/player-config/".concat(this.queryParams.player,".json?cache=1"));case 2:return t=e.sent,e.next=5,t.json();case 5:i=e.sent,a=E(E({},i.imaKeyValues),this.queryParams.imaKeyValues),n=E(E({},i),this.queryParams),_.debug("initConfig merged config",n),Object.assign(this,n),this.imaKeyValues=a;case 11:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"initPlugins",value:(P=(0,n.Z)(d().mark((function e(){var t,a,n,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("initPlugins"),(t=document.createElement("script")).src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",t.async=!0,document.head.appendChild(t),a=g(this.eventPluginsConfig),e.prev=6,a.s();case 8:if((n=a.n()).done){e.next=16;break}return r=n.value,e.next=12,i(177)("./".concat(r.type));case 12:o=e.sent.default,this.eventPlugins.push(new o(r.params));case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),a.e(e.t0);case 21:return e.prev=21,a.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[6,18,21,24]])}))),function(){return P.apply(this,arguments)})},{key:"initMedia",value:(p=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(isNaN(+this.mediaId)||!Number.isInteger(+this.mediaId)){e.next=7;break}return e.next=3,fetch("https://dal.walla.co.il/media/".concat(this.mediaId,"?origin=").concat(window.location.host));case 3:return t=e.sent,e.next=6,t.json();case 6:this.media=e.sent.data;case 7:_.debug("media:",this.media);case 8:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"initEventProperties",value:function(){var e,t,i,a;this.media&&(this.eventProperties.mediaId=this.media.id,this.eventProperties.mediaTitle=this.media.title,this.eventProperties.mediaDuration=null===(e=this.media)||void 0===e||null===(t=e.video)||void 0===t?void 0:t.duration,this.eventProperties.playerId=null===(i=this.media)||void 0===i||null===(a=i.video)||void 0===a?void 0:a.duration)}},{key:"setupPoster",value:function(){var e,t,i,a;void 0===this.poster&&void 0!==(null===(e=this.media)||void 0===e||null===(t=e.image)||void 0===t?void 0:t.file_name)&&(this.poster=function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,o="".concat(e);o.length<5;)o="0".concat(e);if(i%100!=0)throw"Image width allowed only in 100s";var s=t&&t.length?t:"".concat(e,"-46.jpg"),l=i>0?",w_".concat(i):"",d="/".concat(o[0],"/").concat(o[1],"/").concat(o[2],"/").concat(o[3],"/").concat(s),u=-1!==s.indexOf(".gif");if(n&&n.length&&!u)return"https://images.wcdn.co.il/".concat(n,",f_auto").concat(l).concat(d);var c=[].concat((0,h.Z)(i>0?u?["q_auto","w_".concat(i)]:["f_auto","q_auto","w_".concat(i)]:[]),(0,h.Z)(""!==a?[a]:[]),(0,h.Z)(void 0!==r?["f_"+r]:[]));return"https://images.wcdn.co.il/".concat(c.join(",")).concat(d)}(null===(i=this.media)||void 0===i?void 0:i.id,null===(a=this.media.image)||void 0===a?void 0:a.file_name,1200,c["16_9"],void 0,"webp"),_.debug("setupPoster",this.poster)),this.videoJsPlayer.poster(this.poster)}},{key:"waitForGoogleImaIfAdsEnabled",value:(v=(0,n.Z)(d().mark((function e(){var t,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disableAds){e.next=2;break}return e.abrupt("return");case 2:t=Date.now()+8e3,e.prev=3;case 4:if(void 0===(null===(i=window)||void 0===i||null===(a=i.google)||void 0===a?void 0:a.ima)){e.next=8;break}return _.debug("waitForGoogleIma loaded"),e.abrupt("return");case 8:return _.trace("waitForGoogleIma not ready yet"),e.next=11,new Promise((function(e){return setTimeout(e,50)}));case 11:if(!(t<Date.now())){e.next=13;break}throw new Error("waitForGoogleIma timeout");case 13:e.next=4;break;case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(3);case 19:case"end":return e.stop()}}),e,this,[[3,17]])}))),function(){return v.apply(this,arguments)})},{key:"setupSubtitles",value:function(){var e,t,i,a=this;null===(e=this.media)||void 0===e||null===(t=e.video)||void 0===t||null===(i=t.languages)||void 0===i||i.map((function(e){_.debug("Adding subtitle",e),a.videoJsPlayer.addRemoteTextTrack({kind:"subtitles",label:e.name,default:1===e.id,src:"/subtitles/".concat(a.media.id,"/").concat(e.id)},!0)}))}},{key:"setupPlayerSrc",value:function(){var e,t,i,a;void 0===this.stream&&void 0!==(null===(e=this.media)||void 0===e||null===(t=e.video)||void 0===t?void 0:t.url)&&(this.stream=null===(i=this.media)||void 0===i||null===(a=i.video)||void 0===a?void 0:a.url),this.videoJsPlayer.src({src:this.stream,type:"application/x-mpegURL"})}},{key:"setupPlayerEvents",value:function(){var e=this;this.videoJsPlayer.on("mute",(function(){_.debug("on mute ",{currentTime:e.videoJsPlayer.currentTime()}),e.emitPlayerEvent(y.s.Mute,{currentTime:e.videoJsPlayer.currentTime()})})),this.videoJsPlayer.on("play",(function(){_.debug("on play",{duration:e.videoJsPlayer.duration(),isPlayAutoplay:e.isPlayAutoplay}),e.emitPlayerEvent(y.s.Play,{duration:e.videoJsPlayer.duration(),isPlayAutoplay:e.isPlayAutoplay})})),this.videoJsPlayer.on("timeupdate",(function(){var t,i,a;e.reportFirstProgress(),null!==(t=e.videoJsPlayer)&&void 0!==t&&null!==(i=t.ads)&&void 0!==i&&null!==(a=i.isAdPlaying)&&void 0!==a&&a.call(i)?_.trace("on timeupdate ad is playing skipping timeupdate event"):(_.trace("on timeupdate",e.videoJsPlayer.currentTime(),e.videoJsPlayer.duration()),e.emitPlayerEvent(y.s.TimeUpdate,{currentTime:e.videoJsPlayer.currentTime(),duration:e.videoJsPlayer.duration()}))})),this.videoJsPlayer.on("pause",(function(){_.debug("on pause",e.videoJsPlayer.currentTime(),e.videoJsPlayer.duration()),e.emitPlayerEvent(y.s.Pause,{currentTime:e.videoJsPlayer.currentTime(),duration:e.videoJsPlayer.duration()})})),this.videoJsPlayer.on("ended",(function(){var t,i,a;null!==(t=e.videoJsPlayer)&&void 0!==t&&null!==(i=t.ads)&&void 0!==i&&null!==(a=i.isAdPlaying)&&void 0!==a&&a.call(i)?_.trace("on timeupdate ad is playing skipping ended event"):e.playbackEnded||(e.playbackEnded=!0,_.debug("on ended",e.videoJsPlayer.currentTime(),e.videoJsPlayer.duration()),e.emitPlayerEvent(y.s.Ended,{currentTime:e.videoJsPlayer.currentTime(),duration:e.videoJsPlayer.duration()}))})),this.videoJsPlayer.on("volumechange",(function(){var t;if(!e.videoJsPlayer.muted()){var i=e.videoJsPlayer.volume();null===(t=window.localStorage)||void 0===t||t.setItem(A,"".concat(i)),_.debug("on volumechange","volume set to ".concat(i))}})),window.addEventListener("message",(function(t){var i,a,n,r,o,s,l;if((null==t||null===(i=t.data)||void 0===i?void 0:i.type)===y.z.PlayerEvent&&t.data.sdkContext===e.sdkContext){var d=t.data.eventType;switch(_.debug("Receving event: type: ".concat(t.data.type," eventType: ").concat(d)),d){case y.s.Play:var u,c,v;null!==(a=e.videoJsPlayer)&&void 0!==a&&null!==(n=a.ads)&&void 0!==n&&null!==(r=n.isAdPlaying)&&void 0!==r&&r.call(n)?null===(u=e.videoJsPlayer)||void 0===u||null===(c=u.ima)||void 0===c||null===(v=c.resumeAd)||void 0===v||v.call(c):e.videoJsPlayer.play();break;case y.s.Pause:var p,m,h;null!==(o=e.videoJsPlayer)&&void 0!==o&&null!==(s=o.ads)&&void 0!==s&&null!==(l=s.isAdPlaying)&&void 0!==l&&l.call(s)?null===(p=e.videoJsPlayer)||void 0===p||null===(m=p.ima)||void 0===m||null===(h=m.pauseAd)||void 0===h||h.call(m):e.videoJsPlayer.pause();break;case y.s.Reset:e.videoJsPlayer.pause(),e.videoJsPlayer.reset();break;case y.s.Dispose:e.videoJsPlayer.pause(),e.videoJsPlayer.dispose();break;case y.s.Mute:e.videoJsPlayer.muted(!0)}}}))}},{key:"reportFirstProgress",value:function(e){this.isFirstProgressReported||(_.debug("reportFirstProgress reporting first progress ",this.mediaId),this.isFirstProgressReported=!0,this.emitPlayerEvent(y.s.FirstProgress,E({isPlayAutoplay:this.isPlayAutoplay},e?{isAdPlay:e}:{})))}},{key:"setupImaTagIfAdsEnabled",value:function(){var e,t,i,a,n,r=this;if(!this.disableAds){var o=Object.keys(this.imaKeyValues).map((function(e){return"".concat(e,"=").concat(r.imaKeyValues[e])})).join("&"),s=null===(e=window.localStorage.getItem("_psegs"))||void 0===e?void 0:e.replace(/[\[\]]/g,"");s&&(o+=o?"&":"",o+="permutive=".concat(encodeURIComponent(s)));var l=new URLSearchParams(E(E(E(E(E(E(E(E({},this.imaAdUnit?{iu:this.imaAdUnit}:{}),this.imaSizes?{sz:this.imaSizes}:{}),this.url?{url:this.url,description_url:this.url}:{}),null!==(t=this.media)&&void 0!==t&&null!==(i=t.video)&&void 0!==i&&i.duration?{vid_d:String(null===(a=this.media)||void 0===a||null===(n=a.video)||void 0===n?void 0:n.duration)}:{}),o?{cust_params:o}:{}),{output:this.output?this.output:"vast"}),this.vpi?{vpi:this.vpi}:{}),{},{impl:"s",gdfp_req:"1",env:"vp",unviewed_position_start:"1"}));this.imaTag="https://pubads.g.doubleclick.net/gampad/ads?"+l.toString(),_.debug("setupImaTagIfAdsEnabled",this.imaTag)}}},{key:"setupImaIfAdsEnabled",value:function(){var e=this;this.disableAds||(_.debug("Ads enabled"),this.videoJsPlayer.ima({adTagUrl:this.imaTag,prerollTimeout:4e3,timeout:4e3,postrollTimeout:3e3,preventLateAdStart:!0,adLabelNofN:"מתוך",adLabel:"פרסומת",featureFlags:{enableOmidBeta:!0},adsManagerLoadedCallback:function(){if(!e.videoJsPlayer.muted()){var t=e.videoJsPlayer.volume();e.videoJsPlayer.ima.getAdsManager().setVolume(t),e.videoJsPlayer.volume(t),_.debug("Ads volume set to ".concat(t))}_.trace("adsManagerLoaded"),e.emitPlayerEvent(y.s.AdsManagerLoaded),e.videoJsPlayer.ima.addEventListener(google.ima.AdEvent.Type.AD_BREAK_STARTED,(function(){_.debug("AD_BREAK_STARTED")})),e.videoJsPlayer.ima.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,(function(){e.reportFirstProgress(!0),_.debug("AD_PROGRESS")})),e.videoJsPlayer.ima.addEventListener(google.ima.AdEvent.Type.STARTED,(function(){e.emitPlayerEvent(y.s.AdStarted),_.debug("AD_STARTED")})),e.videoJsPlayer.ima.addEventListener(google.ima.AdEvent.Type.SKIPPED,(function(){e.emitPlayerEvent(y.s.AdSkipped),_.debug("AD_SKIPPED")})),e.videoJsPlayer.ima.addEventListener(google.ima.AdEvent.Type.COMPLETE,(function(){e.emitPlayerEvent(y.s.AdCompleted),_.debug("AD_COMPLETED")})),e.videoJsPlayer.ima.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(){e.emitPlayerEvent(y.s.AdAllCompleted),_.debug("AD_COMPLETED")})),e.videoJsPlayer.ima.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(){_.debug("CONTENT_RESUME_REQUESTED is paused?: ".concat(e.videoJsPlayer.paused())),e.videoJsPlayer.paused()&&e.videoJsPlayer.duration()===1/0&&(_.debug("CONTENT_RESUME_REQUESTED hard resuming playback (detected paused)"),e.videoJsPlayer.play())}))}}))}},{key:"setupGeoBlockingIfNecessary",value:(l=(0,n.Z)(d().mark((function e(){var t,i,a,n,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===(null===(t=this.media)||void 0===t||null===(i=t.media_provider_id)||void 0===i?void 0:i.geo_auth)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://pro.ip-api.com/json?key=ay3FPSS6OcBXPHg&fields=countryCode");case 4:if(a=e.sent,n=void 0,200!==a.status){e.next=11;break}return e.next=9,a.json();case 9:r=e.sent,n=null==r?void 0:r.countryCode;case 11:"IL"!==n&&void 0!==n&&(_.info("setupGeoBlockingIfNecessary blocking playback for countryCode",n),(o=document.createElement("div")).innerHTML="<div class='non-il-block'>\n\t\t\t\t<div class='non-il-block-inner'>\n\t\t\t\t\t<img src='/assets/logo/mobile.svg' alt='וואלה' />\n\t\t\t\t\t<span>סרטון זה אינו זמין במיקום הגאוגרפי שלך.</span>\n\t\t\t\t</div>\n\t\t\t</div>",this.playerElem.appendChild(o.firstChild),this.autoplay=!1,this.videoJsPlayer.autoplay(!1),this.videoJsPlayer.reset());case 12:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"setupParentalControlIfNecessary",value:function(){var e,t=this;if("1"===(null===(e=this.media)||void 0===e?void 0:e.parental_control)){_.debug("setupParentalControlIfNecessary active"),this.autoplay=!1;var i=document.createElement("div");i.innerHTML="<div class='parental-control'>\n\t\t\t<div class='parental-control-inner'>\n\t\t\t\t<p>סרט זה מכיל תכנים המוגבלים למבוגרים מעל גיל 18 בלבד. לחיצה על כפתור האישור מאשרת כי מלאו לך 18 שנה</p>\n\t\t\t\t<button>אישור</button>\n\t\t\t\t<a href='/'>לא, אני עוד לא בן 18</a>\n\t\t\t</div>\n\t\t</div>";var a=i.firstChild;i.querySelector("button").addEventListener("click",(function(){t.playerElem.removeChild(a)})),this.playerElem.appendChild(a)}}},{key:"setupVolume",value:function(){if(!this.muted){var e,t,i=null===(e=window.localStorage)||void 0===e?void 0:e.getItem(A);"object"===(0,a.Z)(i)&&(i="0.5",null===(t=window.localStorage)||void 0===t||t.setItem(A,i)),_.debug("Volume set to ".concat(i)),this.videoJsPlayer.volume(+i)}}},{key:"attemptAutoplay",value:(t=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.autoplay){e.next=2;break}return e.abrupt("return");case 2:return _.debug("attemptAutoplay"),e.prev=3,this.isPlayAutoplay=!0,e.next=7,m({muted:this.videoJsPlayer.muted(),timeout:"/"===window.parent.location.pathname?3e5:2e3});case 7:return t=e.sent,_.trace("canAutoplay result",t),e.next=11,this.videoJsPlayer.play();case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(3),this.isPlayAutoplay=!1,_.warn("attemptAutoplay failed",e.t0),this.emitPlayerEvent(y.s.AutoPlayBlocked);case 18:case"end":return e.stop()}}),e,this,[[3,13]])}))),function(){return t.apply(this,arguments)})},{key:"emitPlayerEvent",value:function(e,t){var i,a,n=E(E({},this.eventProperties),t);this.eventPlugins.forEach((function(t){t.event(e,n)})),null===(i=window)||void 0===i||null===(a=i.parent)||void 0===a||a.postMessage("WallaPlayer_".concat(e,"_media_id_").concat(n.mediaId),"*"),this.parentWindow&&this.parentWindow.postMessage(E({type:y.z.PlayerEvent,eventType:e,content:n},void 0!==this.sdkContext?{sdkContext:this.sdkContext}:{}),"*")}}]),e}();window.wallaPlayerInstance=new k},311:(e,t,i)=>{"use strict";i.d(t,{s:()=>n,z:()=>a});var a=function(e){return e.Init="Init",e.PlayerEvent="PlayerEvent",e}({}),n=function(e){return e.Play="play",e.FirstProgress="FirstProgress",e.Pause="pause",e.Mute="mute",e.Dispose="dispose",e.Reset="reset",e.Ended="ended",e.TimeUpdate="timeupdate",e.VolumeChange="volumechange",e.AdsManagerLoaded="adsManagerLoaded",e.AutoPlayBlocked="autoPlayBlocked",e.AdStarted="adStarted",e.AdCompleted="adCompleted",e.AdSkipped="AdSkipped",e.AdAllCompleted="AdAllCompleted",e}({})},57830:(e,t,i)=>{"use strict";i.d(t,{j:()=>l});var a=i(15819),n={trace:0,debug:1,info:2,warning:3,error:4},r=["[TRACE]","[DEBUG]","[INFO]","[WARNING]","[ERROR]"],o=function(){},s="undefined"!=typeof window,l=function(e){var t,i,l=s&&(null===(t=window.localStorage)||void 0===t?void 0:t.getItem("logger_level"))||"info",d=e&&s&&(null===(i=window.localStorage)||void 0===i?void 0:i.getItem("logger_level_"+e))||l,u=n[d];if((!s||window.console)&&console.log){e&&(e="[".concat(e,"]"));var c={trace:o,debug:o,info:o,warn:o,warning:o,error:o},v=function(t){var i=r[t];return{get:function(){var r;return(r=Function.prototype.bind).call.apply(r,[t>=n.error?console.error:console.log,console].concat((0,a.Z)(function(t){var i=[];return s||i.push((new Date).toJSON()),i.push(t),e&&i.push(e),i}(i))))}}},p={};switch(u){case n.trace:p.trace=v(n.trace);case n.debug:p.debug=v(n.debug);case n.info:p.info=v(n.info);case n.warning:p.warn=v(n.warning),p.warning=p.warn;case n.error:p.error=v(n.error)}return Object.defineProperties(c,p),c}};l()},25893:()=>{}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,exports:{}};return a[e].call(i.exports,i,i.exports,r),i.exports}r.m=a,e=[],r.O=(t,i,a,n)=>{if(!i){var o=1/0;for(u=0;u<e.length;u++){for(var[i,a,n]=e[u],s=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(r.O).every((e=>r.O[e](i[l])))?i.splice(l--,1):(s=!1,n<o&&(o=n));if(s){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[i,a,n]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,i)=>(r.f[i](e,t),t)),[])),r.u=e=>e+"_"+{4342:"c999d0fa4dcccf91ce92",9650:"03bef166a89129986a87"}[e]+"_"+{4342:"c999d0fa4dcccf91ce92",9650:"03bef166a89129986a87"}[e]+"_walla.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},i="core:",r.l=(e,a,n,o)=>{if(t[e])t[e].push(a);else{var s,l;if(void 0!==n)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==i+n){s=c;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",i+n),s.src=e),t[e]=[a];var v=(i,a)=>{s.onerror=s.onload=null,clearTimeout(p);var n=t[e];if(delete t[e],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((e=>e(a))),i)return i(a)},p=setTimeout(v.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=v.bind(null,s.onerror),s.onload=v.bind(null,s.onload),l&&document.head.appendChild(s)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/public/",(()=>{var e={3035:0};r.f.j=(t,i)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var n=new Promise(((i,n)=>a=e[t]=[i,n]));i.push(a[2]=n);var o=r.p+r.u(t),s=new Error;r.l(o,(i=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",s.name="ChunkLoadError",s.type=n,s.request=o,a[1](s)}}),"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,i)=>{var a,n,[o,s,l]=i,d=0;if(o.some((t=>0!==e[t]))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)var u=l(r)}for(t&&t(i);d<o.length;d++)n=o[d],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(u)},i=self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),r.nc=void 0;var o=r.O(void 0,[3933,9330],(()=>r(57106)));o=r.O(o)})();